<!DOCTYPE html>
<html>
<head>
	<title>Guessing Game</title>
	<style>
		body {
            display: flex;
			flex-direction: column;
			align-items: center;
            margin: auto;
            width: 640px; 
            padding: 50px;
            font-family: 'Lexend Deca', sans-serif; 
            color: #2E475D;    
            text-align: left;
            background-color: #e6f2ff;;
        }

		main {
			display: flex;
			flex-direction: column;
			align-items: center;
			max-width: 50%;
			margin-top: 50px;
			margin-bottom: 50px;
		}

		img {
            /* center images */
            display: block;
            margin-left: auto;
            margin-right: auto;
			max-width: 100%;
		}

		button {
			display: none;
			margin-top: 50px;
			font-size: 20px;
			padding: 10px 20px;
			background-color: #68697b;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		button.show {
			display: block;
		}
		
		.stimuli {
			max-width: 50%;
		}
	</style>
</head>
<body>
	<h1>Welcome to the game!</h1>

	<p>In this game, you will be paired <b>with another participant (another Prolific person)</b> and you will play a communication game together. You will take turns exchanging messages, using novel words to communicate about shapes. <b>Your goal is to figure out a way to earn the maximum amount of points by successfully encoding and decoding messages with your partner.</b> During the game, you will be presented with images similar to the ones below: </p>
	<img src="/static/interface/example_stimuli.png" class="stimuli">
	<p>These images consists of two elements: a shape (hexagon, triangle or star) and a box with two compartments, with the shape being placed on the right or on the left (the position). <b>As the sender, your task is to choose between two messages to describe the shape that you see on your screen to your partner.</b> You will be provided with two messages to choose between: in this example, it is <i>rabu</i> and <i>tabudiga</i>. You can only choose one of them to describe the shape to your partner. An example of the interface for this task is presented below:</p>

    <img src="/static/interface/sender.png">

	<p>Here, you are asked to describe <b>the triangle which is positioned on the left.</b> To send a longer message (<i>tabudiga</i>), press and hold for {{ cost_long }} seconds. For shorter messages (<i>rabu</i>), press and hold for {{ cost_short }} second. Let's assume that you choose <i>rabu</i>.</p>

	<p>The goal of your partner acting as <b>receiver on this trial will be to guess the shape that you encoded by the message that you sent.</b> In addition to the message that you sent them, they will be provided with <b>the position of the shape that you were shown (the red dot indicating that the shape that you sent is on the left)</b>. The interface for the receiver looks like this:</p>

    <img src="/static/interface/receiver.png">

	<p>If the receiver guesses correctly (if he clicks on the triangle), you both get one point, with each point adding 5 pence to your total reward. If they guess incorrectly, neither of you gets any points! </p>

	<p>After every round  you and your partner switch roles: your partner will be the sender and you will be the receiver. You will be playing a total of {{ nrounds }} rounds.</p>

	<button id="continueBtn" style="display: none;">Continue</button>
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
    <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const socket = io();

		// Disable refresh and back navigation
		history.pushState(null, null, location.href);
		window.addEventListener('popstate', function () {
			history.pushState(null, null, location.href);
		});

        socket.on('connect', function() {
            socket.emit('joinedDescription');
        });

		setTimeout(function() {
			document.getElementById("continueBtn").style.display = "block";
		}, 0);

        // if continue button is clicked, emit continue event
        document.getElementById("continueBtn").addEventListener("click", function() {
            socket.emit("readyToContinue");
        });

        socket.on('redirect', function(data) {
            window.location.href = data.url;
        });
	</script>
</body>
</html>
