<!DOCTYPE html>
<html>
<head>
	<title>Guessing Game</title>
    <style>
		body {
            display: flex;
			flex-direction: column;
			align-items: center;
            margin: auto;
            width: 640px; 
            padding: 50px;
            font-family: 'Lexend Deca', sans-serif; 
            color: #2E475D;    
            text-align: left;
            background-color: #e6f2ff;;
        }

		main {
			display: flex;
			flex-direction: column;
			align-items: center;
			max-width: 50%;
			margin-top: 50px;
			margin-bottom: 50px;
		}

		img {
            /* center images */
            display: block;
            margin-left: auto;
            margin-right: auto;
			max-width: 100%;
		}

		button {
			margin-top: 50px;
			font-size: 20px;
			padding: 10px 20px;
			background-color: #68697b;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		button.show {
			display: block;
		}
		
		.stimuli {
			max-width: 50%;
		}
	</style>
</head>
<body>
	<p>Welcome to the game! You'll be paired with another participant to play a communication game. Your goal is to earn maximum points by exchanging messages about shapes. The game involves images like this:</p>

	<!-- <img src="[image]" alt="Shapes"> -->
	<img src="/static/interface/example_stimuli.png" class="stimuli">

	<p>The images show a shape (triangle, hexagon,  or star) in a box with two compartments, either on the left or right.</p>

	<p>As the sender, your task is to describe the shape to your partner using two messages to choose from, like "rabu" and "tabudiga." You can send longer messages by pressing and holding for {{ cost_long }} seconds or shorter messages by pressing and holding for {{ cost_short }} second. If you need assistance, both senders and receivers can use the "Hint" button, which displays all possible shapes and their positions, to make the game easier.</p>

	<p>The receiver's task is to guess the shape you encoded based on the message you sent. They'll also see the position of the shape (indicated by a red dot). They can use the "Hint" button as well to see all possible shapes and their positions to help with their guess. Guessing correctly earns both of you one point, adding 10 pence to your reward. Incorrect guesses yield no points.</p>

	<p>After each round, you'll switch roles. There will be a total of {{ nrounds }} rounds in the game. Good luck!</p>

	<button id="continueBtn">Begin</button>
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
    <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const socket = io();

		// Disable refresh and back navigation
		history.pushState(null, null, location.href);
		window.addEventListener('popstate', function () {
			history.pushState(null, null, location.href);
		});

        // if continue button is clicked, emit continue event
        document.getElementById("continueBtn").addEventListener("click", function() {
            socket.emit("readyToContinue");
        });

        socket.on('redirect', function(data) {
            window.location.href = data.url;
        });
	</script>
</body>
</html>
